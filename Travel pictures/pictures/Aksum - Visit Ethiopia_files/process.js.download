window._PHV2SITE = JSON.parse(`{"subacc":1219252771,"webUserId":140921,"banAdult":true,"uuid":"47a5c491-2e14-466d-88dc-ee0b12db2b83","params":["","","",""],"scriptDomain":"news-jarubi.cc","monetization":{"back_button":{"tbUrl":"https://news-jarubi.cc/tb?i=0\u0026id=1219252771\u0026monetization=partners\u0026traceId=47a5c491-2e14-466d-88dc-ee0b12db2b83\u0026type=accept"}},"trafficCategory":1,"fbRedirect":false}`);
(()=>{"use strict";var t,e,n={6348:(t,e,n)=>{n.d(e,{M:()=>r});const i=["brands","mobile","platform","platformVersion","architecture","bitness","wow64","model","fullVersionList"];async function r(){if(!("userAgentData"in navigator))return{};try{return await navigator.userAgentData.getHighEntropyValues(i)}catch(t){return{}}}},8476:(t,e,n)=>{n.d(e,{A:()=>i});class i{name="";constructor(t){this.name=t}static default(){return new i("")}static named(t){return new i(t)}debug(t,...e){this._log("debug",t,...e)}warn(t,...e){this._log("warn",t,...e)}error(t,...e){this._log("error",t,...e)}_log(t,e,...n){"object"==typeof e&&(e=JSON.stringify(e));const i=this.name?`[${this.name}] ${e}`:e;switch(t){case"debug":console.debug(i,...n);break;case"warn":console.warn(i,...n);break;case"error":console.error(i,...n);break;default:throw new Error(`unknown level=${t}`)}}}},7128:(t,e,n)=>{n.d(e,{IU:()=>c,Tv:()=>s,_p:()=>d});var i=n(8940),r=n(2047);const o=999999998;function s(t,e,n,i){return i||(i=o),a(t,e,n,i)}function a(t,e,n,r){const o=document.createElement("div");o.setAttribute("id","phLock"),o.setAttribute("class",i.A["ph-bd-wrapper"]),o.setAttribute("style",`display:none; background: rgba(0, 0, 0, ${n/100}); z-index: ${r}`);const s=document.createElement("div");s.setAttribute("class",i.A["ph-bg-text"]),t&&(s.innerHTML+=`<h2>${t}</h2>`),e&&(s.innerHTML+=`<p>${e}</p>`),o.appendChild(s);try{!function(t){document.body?document.body.appendChild(t):window.onload=()=>{document.body.appendChild(t)}}(o)}catch(t){console.error(t)}return o}function c(){const t=document.querySelector("#phLock");t&&t.remove()}class d{_config={title:"",text:"",dimming:0,zIndex:o};clickHandler=t=>{};constructor(t,e,n,i,r){this._config={title:t,text:e,dimming:n,zIndex:i},this.clickHandler=r}show(){s(this._config.title,this._config.text,this._config.dimming,this._config.zIndex).addEventListener("click",(0,r.kl)(this.clickHandler))}hide(){c()}}},9406:(t,e,n)=>{n.d(e,{bc:()=>o,p$:()=>r});var i=n(2047);async function r(t,e,n,r,o,c,d,l,u,h,p){const m=a(t,e,n,r,o,c,d,l,h,u),g=await(0,i.Un)({exclude:p});return s(`https://show.partners-show.com/api/v1/inpage/show/?${m.toString()}`,[],g)}async function o(t,e,n,r,o,c,d,l,u){return s(`https://show.partners-show.com/api/v1/pop/show/?${a(t,e,n,r,o,c,d,l,u,1).toString()}`,null,await(0,i.Un)())}function s(t,e,n){return fetch(t,n).then((t=>{switch(t.status){case 200:return t.json();case 204:return e;default:return t.text().then((e=>{if(0===e.length)return Promise.reject(`status code ${t.status}`);try{return Promise.reject(JSON.parse(e))}catch(t){return Promise.reject(e)}}))}}))}function a(t,e,n,i,r,o,s,a,c,d,l,u,h,p,m,g,f,w){const v={uid:t,subacc:e,sub1:n,sub2:i,sub3:r,sub4:o,adult:s,traffic:a,traceId:c,limit:d,land:f,id:l,subdate:u,vki:h,sw:p,swDomainId:m,landDomain:g,initial:w};for(let t in v)v[t]||delete v[t];return new URLSearchParams(v)}},5142:(t,e,n)=>{function i(t){const e=document.createElement("div");return e.innerHTML=t,e.firstChild}n.d(e,{H:()=>i})},2047:(t,e,n)=>{n.d(e,{Mh:()=>d,QV:()=>o,R_:()=>l,Un:()=>p,Z2:()=>h,cb:()=>r,i1:()=>a,jV:()=>c,kl:()=>m,xO:()=>s,zR:()=>u});var i=n(6348);function r(t,e){if(0!==e)return setTimeout((()=>t()),1e3*e);t()}async function o(t){const e=Date.now();return 0===t?Date.now()-e:new Promise((n=>{setTimeout((()=>n(Date.now()-e)),1e3*t)}))}function s(t){return fetch(t,{method:"HEAD"})}function a(t){return`/${t.worker_name}.js`}function c(){return"serviceWorker"in navigator&&"Notification"in window&&"PushManager"in window&&"showNotification"in ServiceWorkerRegistration.prototype}function d(t){return null!==t.target.closest("[data-phv2]")}function l(t){const e=function(t,e){try{const n=document.currentScript;return new URL(n.src).searchParams.get(t)||e}catch(t){return e}}(t,"");return"true"===e||"1"===e}function u(t){return{webUserId:t.webUserId,subacc:t.subacc,scriptDomain:t.scriptDomain,publicKeyId:t.publicKeyId,publicKey:t.publicKey,subParams:t.params,adultAds:!t.banAdult,processJsVersion:"v0.26.0".replace("v",""),traceId:t.uuid,trafficCategory:t.trafficCategory,landingId:0}}function h(t){return new Promise(((e,n)=>{let i;if(t.installing)i=t.installing;else{if(!t.waiting)return t.active?e(t.active):n(new Error("unknown registration state"));i=t.waiting}i.addEventListener("statechange",(t=>{console.debug("statechange: %s",t.target.state),"activated"===t.target.state&&e(i)}))}))}async function p(t){return t=t||{},{method:"POST",body:JSON.stringify({...t,ch:await(0,i.M)()}),headers:{}}}function m(t){let e=!1;return async function(...n){if(!e){e=!0;try{await t.apply(this,n)}catch(t){console.error(t)}finally{e=!1}}}}},4733:(t,e,n)=>{n.d(e,{A:()=>c,h:()=>d});var i=n(8476),r=n(9406),o=n(2047);const s="_phv2onclickcapping",a=i.A.named("onclick");class c{config;settings;constructor(t,e){this.config=t,this.settings=e}activateForce(){throw new Error("manual activation is not possible")}activateIfPossible(){return this.settings.display_settings.disable_no_referer&&!document.referrer?(a.debug("disable monetization with no referrer"),!0):("interactive"===document.readyState?this._activate():document.addEventListener("DOMContentLoaded",(()=>this._activate())),!0)}_listenForClickOnSelector(t){let e=[];""===this.settings.selector&&(a.debug("selector is not set, use default=body"),this.settings.selector="body");try{e=document.querySelectorAll(this.settings.selector)}catch(t){throw a.warn(t.toString()),new Error(`invalid selector: "${this.settings.selector}"`)}0!==e.length?e.forEach((e=>{a.debug("add click event listener for %o",e),e.addEventListener("click",t)})):a.warn(`can't find any elements for selector ${this.settings.selector}`)}_activate(){this._listenForClickOnSelector((0,o.kl)((async t=>{try{if((0,o.Mh)(t))return void a.debug("exclude click on monetization element");if(this._incrementMinClicksCounter(),!this._checkDelay())return void a.debug("click not allowed by delay");if(!this._checkCapping())return void a.debug("click not allowed by capping");if(!this._checkMinClicks())return void a.debug("click not allowed by min clicks");const e=await this._getPopAd();if(!e)return;d(this.settings.type,e),this._updateClickInfo()}catch(t){a.error(t)}})))}_checkDelay(){const t=this._readLocalData();if(0===t.lastClickTimestamp)return a.debug("it's first click, don't check delay?!"),!0;const e=(Date.now()-t.lastClickTimestamp)/1e3;return e>=this.settings.delay||(a.debug(`last click was ${e} sec. ago, need wait ${this.settings.delay-e} sec.`),!1)}_cappingWindowTtl(){return this._readLocalData().cappingWindowFirstClickTimestamp+1e3*this.settings.capping.duration-Date.now()}_checkCapping(){const t=this._readLocalData(),e=t.cappingWindowClicks>=this.settings.capping.limit,n=Date.now()-t.cappingWindowFirstClickTimestamp,i=this._cappingWindowTtl();return!(e&&i>0)||(a.debug(`have ${t.cappingWindowClicks} clicks for since ${n} ms. need to wait ${i} ms.`),!1)}_incrementMinClicksCounter(){const t=this._readLocalData();t.minClicksCount++,this._writeLocalData(t)}_checkMinClicks(){const t=this._readLocalData(),e=this.settings.minClicks-t.minClicksCount;return a.debug(`current=${t.minClicksCount}, min=${this.settings.minClicks}, need=${e}`),e<=0}_readLocalData(){const t={totalClicks:0,firstClickTimestamp:0,lastClickTimestamp:0,cappingWindowFirstClickTimestamp:0,cappingWindowClicks:0,minClicksCount:0},e=window.localStorage.getItem(s);if(null===e)return t;try{const t=JSON.parse(e);return t.minClicksCount=t.minClicksCount||0,t}catch(e){return t}}_writeLocalData(t){window.localStorage.setItem(s,JSON.stringify(t))}_updateClickInfo(){try{const t=this._readLocalData();t.lastClickTimestamp=Date.now(),t.firstClickTimestamp||(t.firstClickTimestamp=t.lastClickTimestamp),this._cappingWindowTtl()<=0&&(t.cappingWindowClicks=0,t.cappingWindowFirstClickTimestamp=t.lastClickTimestamp),t.totalClicks++,t.cappingWindowClicks++,t.minClicksCount=0,this._writeLocalData(t)}catch(t){a.warn("failed to increment capping click",t)}}async _getPopAd(){return(0,r.bc)(this.config.webUserId,this.config.subacc,this.config.params[0],this.config.params[1],this.config.params[2],this.config.params[3],!this.config.banAdult,this.config.trafficCategory||"",this.config.uuid||"")}}function d(t,e){switch(e.impr&&(0,o.xO)(e.impr).then((t=>{})),t){case"new_tab":window.open(e.link);break;case"new_tab_left":window.open(window.location.href),window.location=e.link;break;case"new_tab_left_with_redirect":const n=window.userCustomRedirectUrl||"";window.open(n.startsWith("http")?n:window.location.href),window.location=e.link;break;case"popup":!function(t,e,n,i){const r=void 0!==window.screenLeft?window.screenLeft:window.screenX,o=void 0!==window.screenTop?window.screenTop:window.screenY,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;n=n>1?n:s*n,i=i>1?i:s*i;const c=s/window.screen.availWidth,d=(s-n)/2/c+r,l=(a-i)/2/c+o,u=window.open(t,e,`scrollbars=yes, width=${n/c}, height=${i/c}, top=${l}, left=${d}`);window.focus&&u.focus()}(e.link,"popup",1/3,1/3);break;case"replace":window.location=e.link;break;default:throw new Error(`pop type "${t}" not supported`)}}},4907:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(1601),r=n.n(i),o=n(6314),s=n.n(o)()(r());s.push([t.id,".FDbb8Wnq608tUyIr34sw {\n    position: fixed;\n    z-index: 999999998;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    transition: all .2s ease .1s;\n    display: block !important;\n    opacity: 1\n}\n\n.dSueNY05zzaehWarFW14 {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 999999999;\n    width: 100%;\n    height: 100%;\n    color: #fff;\n    font-size: 2rem;\n    font-weight: 400;\n    flex-direction: column;\n}\n\n.dSueNY05zzaehWarFW14 h2 {\n    width: 80%;\n    color: #fff;\n    max-width: 650px;\n    margin: 0 auto 20px;\n    padding: 0;\n    height: auto;\n    min-width: auto;\n    font-size: 2.5rem;\n    line-height: normal\n}\n\n.dSueNY05zzaehWarFW14 p {\n    width: 80%;\n    max-width: 700px;\n    margin: 0 auto 20px;\n    padding: 0;\n    font-size: 1.5rem;\n    line-height: normal\n}\n",""]),s.locals={"ph-bd-wrapper":"FDbb8Wnq608tUyIr34sw","ph-bg-text":"dSueNY05zzaehWarFW14"};const a=s},6314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);i&&s[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},1601:t=>{t.exports=function(t){return t[1]}},8940:(t,e,n)=>{n.d(e,{A:()=>w});var i=n(5072),r=n.n(i),o=n(7825),s=n.n(o),a=n(7659),c=n.n(a),d=n(5056),l=n.n(d),u=n(540),h=n.n(u),p=n(1113),m=n.n(p),g=n(4907),f={};f.styleTagTransform=m(),f.setAttributes=l(),f.insert=c().bind(null,"head"),f.domAPI=s(),f.insertStyleElement=h();r()(g.A,f);const w=g.A&&g.A.locals?g.A.locals:void 0},5072:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},s=[],a=0;a<t.length;a++){var c=t[a],d=i.base?c[0]+i.base:c[0],l=o[d]||0,u="".concat(d," ").concat(l);o[d]=l+1;var h=n(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var m=r(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:m,references:1})}s.push(u)}return s}function r(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var c=i(t,r),d=0;d<o.length;d++){var l=n(o[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=c}}},7659:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},5056:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},1113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},i={};function r(t){var e=i[t];if(void 0!==e)return e.exports;var o=i[t]={id:t,exports:{}};return n[t](o,o.exports,r),o.exports}r.m=n,r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,n)=>(r.f[n](t,e),e)),[])),r.u=t=>t+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="lands-static:",r.l=(n,i,o,s)=>{if(t[n])t[n].push(i);else{var a,c;if(void 0!==o)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var u=d[l];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==e+o){a=u;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",e+o),a.src=n),t[n]=[i];var h=(e,i)=>{a.onerror=a.onload=null,clearTimeout(p);var r=t[n];if(delete t[n],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((t=>t(i))),e)return e(i)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),c&&document.head.appendChild(a)}},r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=n[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{r.b=document.baseURI||self.location.href;var t={624:0,612:0};r.f.j=(e,n)=>{var i=r.o(t,e)?t[e]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise(((n,r)=>i=t[e]=[n,r]));n.push(i[2]=o);var s=r.p+r.u(e),a=new Error;r.l(s,(n=>{if(r.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+e,e)}};var e=(e,n)=>{var i,o,[s,a,c]=n,d=0;if(s.some((e=>0!==t[e]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(c)c(r)}for(e&&e(n);d<s.length;d++)o=s[d],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=self.webpackChunklands_static=self.webpackChunklands_static||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),r.nc=void 0;var o=r(8476),s=r(2047);class a{enabled=!1;context={traceId:"",subacc:0,jsVersion:""};logsDomain="";constructor(t,e,n,i,r){this.context={...r,traceId:t,subacc:n,jsVersion:i},this.logsDomain=e}enable(){this.enabled=!0}trackCustomEvent(t,e,n){const i={location:location.href,timestamp:Date.now()},r={...this.context,...i,...n,msg:t||"",duration:e||0};o.A.named("track").debug("%s (duration %s ms), %O",r.msg,r.duration,r),this.enabled&&function(t,e){navigator&&"function"==typeof navigator.sendBeacon?navigator.sendBeacon(t,JSON.stringify({...e,useBeacon:!0})):fetch(t,{method:"POST",body:JSON.stringify(e)})}(`https://${this.logsDomain}/track`,r)}}async function c(t){return!!function(){const t=navigator.userAgent.toLowerCase(),e=new RegExp("(WebView|(iPhone|iPod|iPad)(?!.*Safari/)|Android.*(wv))","ig").test(t),n=/fb|android|wv/.test(t);return e&&n}()&&new Promise((e=>{const n=`intent://${window.location.hostname}${window.location.pathname}${window.location.search}#Intent;scheme=https;package=com.android.chrome;end`;document.addEventListener("click",(()=>{window.onbeforeunload=null,window.open(n,"_system"),t&&setTimeout((()=>window.location.replace(t)),1e3)})),e(!0)}))}class d{list;_activated={};constructor(t){this.list=t,this._activateAll(),this._listenUserEvent()}_activateAll(){this.list.forEach((t=>{const e=t.monetization.activateIfPossible();e instanceof Promise?e.then((()=>{this._activated[t.id]=!0})):e&&(this._activated[t.id]=!0)}))}_listenUserEvent(){document.addEventListener("phv2site.activate",(t=>{const{id:e}=t.detail,n=this.list.find((t=>t.id===e));n?this._activated[n.id]?console.warn(`monetization already activated: ${e}`):(n.monetization.activateForce(),this._activated[n.id]=!0):console.warn(`can't activate disabled monetization: ${e}`)}))}activate(t){if("native_web_push"!==t)console.warn(`lazy activation is not supported for monetization: ${t}`);else{const e=new CustomEvent("phv2site.activate",{detail:{id:t}});document.dispatchEvent(e)}}}const l=["native_web_push","inpage","onclick","two_click_push","zero_click_push","back_button"];var u=r(7128);const h=Date.now(),p=o.A.named("native-web-push-v2");class m{config;pushSettings;logTracker;constructor(t,e,n){this.config=t,this.pushSettings=e,this.logTracker=n}activateForce(){this._start()}activateIfPossible(){return!this._shouldBeActivatedManually()&&(this._activate(),!0)}_shouldBeActivatedManually(){return void 0!==this.pushSettings.lazy_activation&&this.pushSettings.lazy_activation}async _activate(){var t;t=this.logTracker,window.addEventListener("error",(e=>{t.trackCustomEvent("got unhandled error",0,{message:e.message,colno:e.colno,error:e.error,filename:e.filename,lineno:e.lineno})})),window.addEventListener("unhandledrejection",(e=>{t.trackCustomEvent(`got unhandled rejection: ${e.reason.toString()}`,0,{reason:e.reason.toString()})})),await(0,s.QV)(this.pushSettings.delay);try{await this._start()}catch(t){p.warn("activation failed",t),this.logTracker.trackCustomEvent(`activation failed: ${t.toString()}`)}}_emitEvent(t,e){window.dispatchEvent(new CustomEvent("phv2site.native_web_push",{detail:{...e,state:t}}))}async _start(){if(this.pushSettings.display_settings.disable_no_referer&&!document.referrer)return void p.debug("disable monetization with no referrer");if(!(0,s.jV)())return this.logTracker.trackCustomEvent("push is not supported"),void this._emitEvent("notSupported");const t=Notification.permission;if("denied"===t)return this.logTracker.trackCustomEvent("permission access denied",Date.now()-h),void this._emitEvent("permissionDenied");this.pushSettings.dimming>0&&"granted"!==t&&(0,u.Tv)(this.pushSettings.caption,this.pushSettings.description,this.pushSettings.dimming);const[e,n]=await this._prepareServiceWorkerAndPermission();if((0,u.IU)(),"granted"!==n)return this._emitEvent("default"===n?"permissionSkipped":"permissionDenied"),void this.logTracker.trackCustomEvent("permission access denied",Date.now()-h);this.logTracker.trackCustomEvent("send subscribe message",Date.now()-h),e.postMessage({action:"subscribe",context:(0,s.zR)(this.config),initialTimestamp:h,firstPermission:t,remoteLogs:this.logTracker.enabled}),navigator.serviceWorker.addEventListener("message",(t=>{const{type:e,data:n}=t.data||{};"subscribed"===e?this._emitEvent("subscribed",n):"subscriptionExists"===e&&this._emitEvent("subscriptionExists",n)}))}registerServiceWorker(){this.logTracker.trackCustomEvent("register service worker",Date.now()-h);const t=performance.now();return navigator.serviceWorker.register((0,s.i1)(this.pushSettings),{updateViaCache:"all",scope:"/"}).then((e=>(this.logTracker.trackCustomEvent("service worker registered",performance.now()-t),(0,s.Z2)(e)))).catch((e=>{this.logTracker.trackCustomEvent("service worker registration failed",performance.now()-t,{error:e.toString()})}))}async requestPermission(){if("granted"===Notification.permission)return Notification.permission;p.debug("permission state is default, request permission");performance.now();return Notification.requestPermission()}_prepareServiceWorkerAndPermission(){return Promise.all([this.registerServiceWorker(),this.requestPermission()])}}var g=r(4733),f=r(5142);const w="2pushclickvisit",v="2pushclickvisitclosed",b=o.A.named("2clickpush");class k{settings;constructor(t){this.settings=t}activateForce(){throw new Error("manual activation is not possible")}async activateIfPossible(){return this.settings.display_settings.disable_no_referer&&!document.referrer?(b.debug("disable monetization with no referrer"),!0):(await this._activate(),!0)}async _activate(){try{if(this._incrementVisit()<this.settings.showOnVisit)return;const t=Math.floor(Date.now()/1e3)-this._getCloseTimestamp();if(t<this.settings.closeDelay)return void b.debug(`no enough elapsed time since last close, need wait ${this.settings.closeDelay-t}s`);await(0,s.QV)(this.settings.delay);if(!await this._showNotificationRequest())return void this._setCloseTimestamp();const e=window.open(this.settings.redirectUrl,"_blank");window.addEventListener("message",(t=>{"subscribed"===t.data.event&&e.close()}))}catch(t){b.warn("activation error",t)}}_incrementVisit(){let t=parseInt(window.localStorage.getItem(w)||"0",10);return t++,window.localStorage.setItem(w,t.toString(10)),t}_showNotificationRequest(){return new Promise((t=>{this._renderVariant(document.body,this.settings.variant,{bg:this.settings.backgroundColor,color:this.settings.textColor,btnColor:this.settings.buttons.color,icon:this.settings.iconUrl,iconColor:this.settings.iconColor,title:this.settings.title,text:this.settings.text,deny:this.settings.buttons.deny,allow:this.settings.buttons.allow,position:this.settings.position,size:this.settings.size},{onClose:()=>t(!1),onDeny:()=>t(!1),onAllow:()=>t(!0)})}))}async _renderVariant(t,e,n,i){const r=await this._buildElement(e,n);r.setAttribute("data-phv2","2clickpush"),t.appendChild(r);const o={"[data-btn-close]":i.onClose,"[data-btn-deny]":i.onDeny,"[data-btn-allow]":i.onAllow};for(let t in o)r.querySelectorAll(t).forEach((e=>e.addEventListener("click",(()=>{o[t](),document.body.removeChild(r)}))))}async _buildElement(t,e){const n=(await this._importComponent(t)).default;return(0,f.H)(n(e))}_importComponent(t){switch(t){case"standard":return r.e(822).then(r.bind(r,4822));case"lightbox":return r.e(254).then(r.bind(r,6254));case"panel":return r.e(829).then(r.bind(r,6829));case"safari":return r.e(633).then(r.bind(r,3633));case"floatingButton":return r.e(111).then(r.bind(r,1111));default:throw new Error(`wrong variant: ${t}`)}}_setCloseTimestamp(){window.localStorage.setItem(v,Math.floor(Date.now()/1e3).toString())}_getCloseTimestamp(){return parseInt(window.localStorage.getItem(v),10)||0}}const _=o.A.named("0clickpush"),y=Date.now(),C={updateViaCache:"all",scope:"/0cl/"};class E{config;settings;constructor(t,e){this.config=t,this.settings=e}activateForce(){throw new Error("manual activation is not possible")}async activateIfPossible(){try{if(!(0,s.jV)())return void _.warn("device does not support a feature");await this._activate()}catch(t){_.error("activation error",t)}return!0}async _activate(){if("denied"===Notification.permission)return void _.debug("notification access is denied");const[t,e]=await this._prepareServiceWorkerAndPermission();"granted"===e?(_.debug("notification access is granted"),t.postMessage({action:"subscribe",context:(0,s.zR)(this.config),initialTimestamp:y,firstPermission:e,remoteLogs:!1})):_.debug("notification access is not granted")}_waitForPermissionChange(){return new Promise((t=>{let e,n=Notification.permission;"default"===n?e=setInterval((()=>{const i=Notification.permission;if(i!==n)return _.debug("Notification.permission changed: %s => %s",n,i),clearInterval(e),void t(i);n=i}),100):t(n)}))}_registerServiceWorker(){return _.debug("register service worker"),navigator.serviceWorker.register(`/${this.settings.worker_name}.js`,C).then((t=>(_.debug("service worker registered: %O",t),(0,s.Z2)(t))))}_prepareServiceWorkerAndPermission(){return Promise.all([this._registerServiceWorker(),this._waitForPermissionChange()])}}o.A.default().debug("Running on build version %s (default_v2.js)","v0.26.0");const S=window._PHV2SITE;if(void 0!==S){const t=new a(S.uuid,S.scriptDomain,S.subacc,"v0.26.0",{landingId:0});(0,s.R_)("remoteLogs")&&t.enable(),t.trackCustomEvent("script loaded");(async function(t,e){if(t.fbRedirect&&await c(""))return;const n=[];for(const i of l){if(!t.monetization[i])continue;const r=e[i];if(!r){o.A.default().warn(`feature '${i}' is not included in this bundle, can't use monetization`);continue}const s=await r();n.push({id:i,monetization:s})}const i=Object.values(n).map((t=>t.id)).join(",");o.A.default().debug(`init with enabled features [${i}], options:`,t),0===n.length&&o.A.default().debug("no monetizations set"),window._phv2Activator=new d(n),document.dispatchEvent(new CustomEvent("phv2site.ready",{detail:t}))})(S,{native_web_push:()=>new m(S,S.monetization.native_web_push,t),onclick:()=>new g.A(S,S.monetization.onclick),two_click_push:()=>new k(S.monetization.two_click_push),zero_click_push:()=>new E(S,S.monetization.zero_click_push),inpage:()=>r.e(314).then(r.bind(r,8314)).then((t=>new(0,t.default)(S,S.monetization.inpage))),back_button:()=>r.e(936).then(r.bind(r,1936)).then((t=>new(0,t.default)(S,S.monetization.back_button)))}).then((()=>{}))}else o.A.default().warn("window._PHV2SITE is not defined")})();
